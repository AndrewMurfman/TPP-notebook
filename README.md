# TPP-notebook
some problem of learning tpp, just a note

2024.9.8  
[metetpp](https://github.com/BorealisAI/meta-tpp) + [lightning-hydra-template](https://github.com/ashleve/lightning-hydra-template)

1. In `metatpp`, I'm not sure why the author used `pyrootutils` and deleted the `.project-root` file. This deletion is significant because when I first ran the `metatpp` demo, it didn't work and kept showing the following error: **FileNotFoundError: Project root directory not found. Indicators: ['.project-root']**. Initially, I thought the `.project-root` file was something that needed to be generated, so I went back to the `lightning-hydra-template` demo and ran `python src/train.py`, which worked perfectly. At first, I assumed the issue was with the `pyrootutils` package, so I modified the `train.py` code in `metetpp` to use `rootutils` instead of `pyrootutils`, based on the `lightning-hydra-template` code. This change didn't resolve the issue, though the error message did change. The script ran for a bit before stopping with the error: **ModuleNotFoundError: No module named 'nfe'**. At this point, I encountered a second problem: how to install `nfe`. I didn’t initially realize that `setup.py` was needed to install the package. I was actually quite close to resolving the issue, but I mistakenly believed the `FileNotFoundError` was still the root cause, leading me to undo all my changes and revert the code to its original state.

2. Starting from the beginning again, I noticed a missing `.project-root` file in `metetpp` that was present in `lightning-hydra-template`. After checking GitHub, I found that `.project-root` is almost an empty file, so I copied it into my local code. The original problem reappeared: **ModuleNotFoundError: No module named 'nfe'**. Now, I was back to figuring out how to install the package. After checking the `nfe` code on GitHub, I realized that the entire git repository was needed to install the package, not just the `nfe` folder. This was easy to solve—download and install the package. However, I then encountered a third problem: **UnicodeDecodeError: 'gbk' codec can't decode byte 0x80 in position 2348: illegal multibyte sequence**. Here, I made a mistake by changing the encoding in `setup.py` to `"gbk"`, when it should have been `"utf8"`. Since `"utf8"` is usually the default, the error message confused me. After trying a few more times, I realized it should be `encoding="utf8"`, and the problem was resolved. Then came a fourth error: **'sklearn' PyPI package is deprecated, use 'scikit-learn' rather than 'sklearn'** for pip commands. This was the first time I encountered this issue, but it was easy to fix—just replace `sklearn` with `scikit-learn` in `setup.py`, as the error message suggested. Finally, I encountered the correct error: **lightning.fabric.utilities.exceptions.MisconfigurationException: No supported GPU backend found!** This means that the only thing missing is a GPU, and the code should now work fine.

**Summary:**
1. Add the `.project-root` file.
2. Download [neural-flows-experiments (nfe)](https://github.com/mbilos/neural-flows-experiments) and place it in `src/models/tpp/flow`.
3. Change the encoding to UTF8 (optional).
4. Install `nfe`.

